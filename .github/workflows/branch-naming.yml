name: Check Branch Naming

oon:
    pull_request:
        branches: [develop, main]
        types: [opened, synchronize]

jobs:
    check-branch-name:
        runs-on: ubuntu-latest
        steps:
            - name: Validate branch name
              run: |
                  BRANCH_NAME="${{ github.head_ref }}"
                  TARGET_BRANCH="${{ github.base_ref }}"
                  echo "üîç Checking PR: $BRANCH_NAME ‚Üí $TARGET_BRANCH"

                  # –î–ª—è PR –≤ develop - —Ç–æ–ª—å–∫–æ feature/fix
                  if [[ "$TARGET_BRANCH" == "develop" ]]; then
                    if [[ ! "$BRANCH_NAME" =~ ^(feature|fix)/[0-9]+-[a-z0-9-]+$ ]]; then
                      echo "::error ::Invalid branch name for develop: $BRANCH_NAME"
                      echo "‚úÖ Use: feature/task-number-title or fix/task-number-title"
                      exit 1
                    fi
                  fi

                  # –î–ª—è PR –≤ main - —Ç–æ–ª—å–∫–æ release
                  if [[ "$TARGET_BRANCH" == "main" ]]; then
                    if [[ ! "$BRANCH_NAME" =~ ^release/[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
                      echo "::error ::Invalid branch name for main: $BRANCH_NAME"
                      echo "‚úÖ Use: release/1.2.0"
                      exit 1
                    fi
                  fi

                  echo "‚úÖ Branch name is valid: $BRANCH_NAME"
